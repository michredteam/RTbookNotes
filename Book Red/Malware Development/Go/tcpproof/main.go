package main

import (
	"fmt"
	"log"
	"net"
)

var protocolo = "tcp"

var listener = "localhost:8989"

func main() {

	listen, err := net.Listen(protocolo, listener)
	if err != nil {
		log.Fatal("error al establecer la escucha", err)
	}

	log.Printf("ecuchando conexiones entrantes")

	for {
		conn, err := listen.Accept()
		if err != nil {
			log.Println("error en la conexion ", err)

		}

		go handler(conn)

	}

}

func handler(conn net.Conn) {
	buffeentrante := make([]byte, 4096)

	numerobytes, err := conn.Read(buffeentrante)
	if err != nil {
		log.Println("error en la lectura de los bytes", err)

	}

	fmt.Fprintf(conn, "%d bytes\n", numerobytes)
}

